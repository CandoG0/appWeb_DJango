{% extends "forms.html" %}
{% load static %}

{% block title %}Agenda - Iniciar Sesión{% endblock title %}

{% block extra_css %}
<link href="{% static 'css/login.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="hero-section">
    <h2 class="section-title">
        <a href="javascript:history.back()" class="back-arrow" title="Regresar">
            <i class="bi bi-arrow-left"></i>
        </a>
        Iniciar Sesión
    </h2>

    <div class="form-container">
        <form action="" method="post">
            {% csrf_token %}

            <p class="form-intro">Bienvenido de nuevo</p>

            <div class="mb-3">
                <label for="id_correo" class="form-label">Correo electrónico</label>
                <input type="email" class="form-control" id="id_correo" name="correo" placeholder="tu@ejemplo.com"
                    value="{{ form.correo.value|default:'' }}" required autocomplete="email">
                {% if form.correo.errors %}
                <div class="text-danger small">{{ form.correo.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="mb-3 password-field">
                <label for="id_contrasenia" class="form-label">Contraseña</label>
                <input type="password" class="form-control" id="id_contrasenia" name="contrasenia"
                    placeholder="Ingresa tu contraseña" required autocomplete="current-password">
                <button type="button" class="password-toggle" title="Mostrar/ocultar contraseña">
                    <i class="bi bi-eye"></i>
                </button>
                {% if form.contrasenia.errors %}
                <div class="text-danger small">{{ form.contrasenia.errors.0 }}</div>
                {% endif %}
            </div>

            <!-- Recordar usuario (opcional para sesiones) -->
            <div class="remember-me">
                <input type="checkbox" id="rememberMe" name="remember_me">
                <label for="rememberMe">Recordar mi sesión</label>
            </div>

            <div class="d-grid gap-2">
                <button class="btn btn-primary-custom" type="submit">
                    <i class="bi bi-box-arrow-in-right me-2"></i>Iniciar Sesión
                </button>
            </div>

                <br>
                <small style="color: #DFAEA1;">
                    ¿No tienes cuenta? <a href="{% url 'registrar' %}" class="login-link"
                        style="font-weight: 600;">Regístrate aquí</a>
                </small>
            </div>
        </form>
    </div>
</div>

<!-- Script para mostrar/ocultar contraseña -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggleButtons = document.querySelectorAll('.password-toggle');

        toggleButtons.forEach(button => {
            button.addEventListener('click', function () {
                const passwordInput = this.previousElementSibling;
                const icon = this.querySelector('i');

                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('bi-eye');
                    icon.classList.add('bi-eye-slash');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('bi-eye-slash');
                    icon.classList.add('bi-eye');
                }
            });
        });
    });
</script>
{% endblock %}